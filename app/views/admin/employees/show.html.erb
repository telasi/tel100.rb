<div class="page-header">
  <h1>
    <code><%= @employee.person_number %></code>
    <%= @employee.full_name %>
  </h1>
</div>

<%= viewer_for @employee do |v|
  v.button_action '', label: 'უკან დაბრუნება'.html_safe, js: 'back', icon: 'arrow-left'
  v.action admin_new_user_url(employee_id: @employee.id), label: 'მომხმარებლად რეგისტრაცია', icon: 'user', button: 'success' unless @employee.user
  v.required_text_field 'person_number', tag: 'code'
  v.required_text_field 'full_name'
  v.required_text_field 'employee_status'
  v.required_array_field 'organization.chain', i18n: 'organization' do |fld|
    fld.complex_field tag: ->(x){ x == @employee.organization ? 'strong' : 'span' } do |c|
      c.text_field 'saporg_number', tag: 'code'
      c.text_field 'name'
    end
  end
  v.boolean_field 'active?', i18n: 'is_active'
  v.complex_field 'user', tag: 'div', class_name: 'well well-sm' do |c|
    c.text_field 'username', tag: 'code'
    c.text_field 'full_name', url: ->(x) { admin_user_url(id: x.id) }
  end
  v.date_field 'created_at', format: :extra, class_name: 'text-muted'
end %>
