{
    "type": "Ext.tab.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "activeTab": 0,
        "designer|userAlias": "documentfoldertab",
        "designer|userClassName": "document.folder.Tab",
        "header": false,
        "height": null,
        "width": null
    },
    "name": "MyTabPanel2",
    "designerId": "c09758ae-9832-4db7-9ae8-b1c0009112a7",
    "viewControllerInstanceId": "34bc20db-588e-4f2d-9a37-299a4336bb40",
    "viewModelInstanceId": "ad723040-eb0c-4688-a8ff-985715261b4a",
    "cn": [
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "designer|displayName": "folders",
                "layout": "vbox",
                "title": [
                    "{i18n.document.folder.ui.folders}"
                ]
            },
            "name": "MyPanel3",
            "configAlternates": {
                "title": "binding"
            },
            "designerId": "14ab9444-3ec1-49f1-a9d9-910e8765b03e",
            "cn": [
                {
                    "type": "Ext.tab.Tab",
                    "reference": {
                        "name": "tabConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "TabConfig5",
                    "designerId": "a4ee6059-8c3a-4340-a635-22d782953658"
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": false,
                        "designer|displayName": "standardFolders",
                        "enableColumnHide": false,
                        "enableColumnMove": false,
                        "enableColumnResize": false,
                        "height": null,
                        "hideHeaders": true,
                        "itemId": "standardFolders",
                        "sortableColumns": false,
                        "store": [
                            "{standardfolders}"
                        ],
                        "title": null
                    },
                    "name": "MyGridPanel1",
                    "configAlternates": {
                        "store": "binding"
                    },
                    "designerId": "c3e264be-b03b-4006-a8f0-9cd32d9f6773",
                    "cn": [
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "name",
                                "flex": 1,
                                "items": null,
                                "sortable": false,
                                "text": [
                                    "{i18n.document.folder.categories.a}"
                                ]
                            },
                            "name": "MyColumn12",
                            "configAlternates": {
                                "text": "binding",
                                "tools": "object",
                                "items": "object"
                            },
                            "designerId": "20d431bc-b79f-4fd8-b61c-0723923b2f0c",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "tools",
                                    "type": "string"
                                },
                                {
                                    "group": "(Custom Properties)",
                                    "name": "items",
                                    "type": "string"
                                }
                            ],
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "var s;",
                                            "if(record.data.parent_id){",
                                            "  s = '<span style=\"float: left; margin-left: 20px;\">' + record.data.icon + ' ' + value + '</span>';",
                                            "} else {",
                                            "  s = record.data.icon + ' ' + value;  ",
                                            "}",
                                            "",
                                            "return s + '<span style=\"float:right;\">' + record.data.count + '</span>';"
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "667edfc5-39fe-4f9e-aed4-df55ca76bca0"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyGridView1",
                            "designerId": "fc8415cf-0091-4a4b-b3d6-4a2663427995"
                        },
                        {
                            "type": "Ext.selection.RowModel",
                            "reference": {
                                "name": "selModel",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "allowDeselect": true,
                                "mode": "SINGLE"
                            },
                            "name": "MyRowSelectionModel1",
                            "designerId": "85dc2910-02c0-46d6-a2ac-96785cbff61e"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onStandardGridpanelSelect",
                                "implHandler": [
                                    "this.refreshDocuments({folderType: 'standard', folderId: record.id});",
                                    "this.getView().down('#customFolders').getSelectionModel().deselectAll();",
                                    "this.getView().up().getViewModel().set('customfolderselection', null);",
                                    "this.getView().fireEvent('folderChosen');"
                                ],
                                "name": "itemclick",
                                "scope": "me"
                            },
                            "name": "onStandardGridpanelSelect",
                            "designerId": "06a447e9-cc88-4c52-acef-2aba2878a6f6"
                        },
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "top"
                            },
                            "name": "MyToolbar2",
                            "designerId": "966bebd4-702c-47f6-a6f7-df5b0aaf8559",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "text": "<i class=\"fa fa-refresh\"></i>"
                                    },
                                    "name": "MyButton11",
                                    "designerId": "e747fa6b-95e2-441f-a719-9a809c33a0ae",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onRefreshFolderButtonClick",
                                                "implHandler": [
                                                    "this.foldersRefresh();",
                                                    "this.getView().fireEvent('foldersrefresh');"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "name": "onRefreshFolderButtonClick",
                                            "designerId": "487cd754-60e4-46f3-9bcd-4a13063076d9"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.toolbar.Fill",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null
                                    },
                                    "name": "MyFill2",
                                    "designerId": "caced38b-4943-4d25-96e5-cc144277e9ac"
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "enableToggle": true,
                                        "layout|flex": null,
                                        "text": "<span class=\"text-muted\"><i class=\"fa fa-check\"></i></span>"
                                    },
                                    "name": "MyButton12",
                                    "designerId": "bbc785d0-05a8-4680-8f74-eb0ae01273a6"
                                },
                                {
                                    "type": "Ext.toolbar.Separator",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null
                                    },
                                    "name": "MySeparator",
                                    "designerId": "d80a4723-e800-4f39-971f-550d4d55fdef"
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "text": "<span class=\"text-muted\"><i class=\"fa fa-cog\"></i></span>"
                                    },
                                    "name": "MyButton13",
                                    "designerId": "054496b3-0bce-48df-9d45-0f1ce8d1c8c3",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onSetupFoldersButtonClick",
                                                "implHandler": [
                                                    "var configwindow = Ext.create('Tel100.view.document.folder.Config');",
                                                    "                        configwindow.show();"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "name": "onSetupFoldersButtonClick",
                                            "designerId": "99cce085-b76d-4c21-bd6b-16f5beabdebd"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": false,
                        "designer|displayName": "customFolders",
                        "header": false,
                        "height": null,
                        "itemId": "customFolders",
                        "layout|flex": 1,
                        "selection": null,
                        "store": "CustomFolders",
                        "title": "TEST"
                    },
                    "name": "MyGridPanel2",
                    "configAlternates": {
                        "selection": "binding"
                    },
                    "designerId": "723c0bce-106d-42d1-8613-bf532c91b22f",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "selection",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "cls": null,
                                "dataIndex": "name",
                                "enableColumnHide": false,
                                "flex": 1,
                                "hideable": false,
                                "sortable": false,
                                "tdCls": "foldercls",
                                "text": [
                                    "{i18n.document.folder.categories.b}"
                                ]
                            },
                            "name": "MyColumn17",
                            "configAlternates": {
                                "text": "binding"
                            },
                            "designerId": "b5af7482-42a3-48cf-827a-53fd9b4af74f"
                        },
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyGridView3",
                            "designerId": "19101984-f73a-4493-b6fb-c1caa2ade612"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onGridpanelAfterRender",
                                "implHandler": [
                                    "component.dropZone = Ext.create('Ext.dd.DropZone', component.el,{",
                                    "  ddGroup: 'Grid2FolderDDGroup',",
                                    "",
                                    "  getTargetFromEvent: function(e) {",
                                    "    return e.getTarget('.foldercls');",
                                    "  },",
                                    "",
                                    "  onNodeEnter : function(target, dd, e, data){",
                                    "    Ext.fly(target).highlight();",
                                    "  },",
                                    "",
                                    "  onNodeOver : function(target, dd, e, data){",
                                    "    var proto = Ext.dd.DropZone.prototype;",
                                    "    return proto.dropAllowed;",
                                    "  },",
                                    "  ",
                                    "  onNodeDrop : function(target, dd, e, data){",
                                    "    var customGrid = Ext.ComponentQuery.query('grid[itemId=customFolders]')[0];",
                                    "    var view = customGrid.getView();",
                                    "    var record = view.getRecord(target);",
                                    "",
                                    "    var vm = customGrid.up('panel').getViewModel();",
                                    "    var model = Ext.create('Tel100.model.folder.Document',{",
                                    "      folder_id: record.id, doc_id: data.records[0].id",
                                    "    });",
                                    "    model.save();",
                                    "",
                                    "    return true;",
                                    "  }",
                                    "});"
                                ],
                                "name": "afterrender",
                                "scope": "me"
                            },
                            "name": "onGridpanelAfterRender",
                            "designerId": "1a0aef8e-2902-4611-89d1-d3cedd86953f"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCustomFoldersSelect",
                                "implHandler": [
                                    "this.refreshDocuments({folderType: 'custom', folderId: record.id});",
                                    "this.getView().down('#standardFolders').getSelectionModel().deselectAll();",
                                    "this.getView().up().getViewModel().set('customfolderselection', rowmodel.getSelection());"
                                ],
                                "name": "select",
                                "scope": "me"
                            },
                            "name": "onCustomFoldersSelect",
                            "designerId": "9faf3bcf-b0af-4047-b241-3f8b4837fc6c"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCustomFoldersBeforeRender",
                                "implHandler": [
                                    "Ext.getStore('CustomFolders').load();"
                                ],
                                "name": "beforerender",
                                "scope": "me"
                            },
                            "name": "onCustomFoldersBeforeRender",
                            "designerId": "d2d894e8-160e-4bd5-b1ea-3a840f4ad332"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": false,
                        "collapsible": true,
                        "designer|displayName": "substitudeList",
                        "height": null,
                        "hideHeaders": true,
                        "store": [
                            "{substitudeStore}"
                        ],
                        "title": "Substitude"
                    },
                    "name": "MyGridPanel",
                    "configAlternates": {
                        "store": "binding"
                    },
                    "designerId": "c573a4a8-18e0-4fc1-9a83-152d320be3c9",
                    "cn": [
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "name",
                                "designer|displayName": "name",
                                "flex": 1,
                                "text": null
                            },
                            "name": "MyColumn9",
                            "designerId": "5225b7a1-c0ca-4c61-9a1a-aa7994f155d6"
                        },
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyGridView2",
                            "designerId": "f1553a7d-47d7-495f-b833-f898470f62dc"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onGridpanelCellClick",
                                "implHandler": [
                                    "var me = this;",
                                    "",
                                    "if(Ext.ComponentQuery.query('usersubstitudepanel').length === 0){",
                                    " helpers.api.substitude.setSubstitude(record.get('id'));",
                                    " var dg = this.getView().up().down('documentgridpanel');",
                                    "",
                                    " var toppanel = Ext.create('Tel100.view.user.substitude.Panel',",
                                    "                           { html: i18n.vacation.ui.substitude_mode.title + record.data.name });",
                                    "  toppanel.down('button').on('click',function(){",
                                    "    helpers.api.substitude.setSubstitude(null);",
                                    "    dg.refresh();",
                                    "  });",
                                    "  toppanel.show().alignTo(Ext.getBody(), 't-t');",
                                    "  this.getView().up().down('documentgridpanel').refresh();",
                                    "  dg.refresh();",
                                    "  }"
                                ],
                                "name": "cellclick",
                                "scope": "me"
                            },
                            "name": "onGridpanelCellClick",
                            "designerId": "8309e9b9-ec8d-4cd3-a58a-f62c31735aef"
                        }
                    ]
                }
            ]
        },
        {
            "type": "linkedinstance",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|displayName": "search",
                "title": [
                    "{i18n.document.search.ui.search}"
                ]
            },
            "name": "document.folder.search",
            "configAlternates": {
                "title": "binding"
            },
            "designerId": "da49fc0a-28c1-42f0-ac6a-3a756d728f49",
            "masterInstanceId": "3281b413-350a-479e-b657-0f1bef619a39",
            "cn": [
                {
                    "type": "Ext.tab.Tab",
                    "reference": {
                        "name": "tabConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "TabConfig2",
                    "designerId": "6a061f84-ec27-411f-a143-7fe45d3cd381"
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTabpanelAfterRender",
                "implHandler": [
                    "/* var bar = component.tabBar;",
                    "            bar.insert(2,[",
                    "                 {",
                    "                     xtype: 'component',",
                    "                     flex: 1",
                    "                 },",
                    "                {",
                    "                    xtype: 'button',",
                    "                    text: '<i class=\"fa fa-cog\"></i>',",
                    "                  handler: function(button){",
                    "                    var configwindow = Ext.create('Tel100.view.document.folder.Config');",
                    "                    configwindow.show();",
                    "                  }",
                    "                }",
                    "            ]);",
                    "  */"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "name": "onTabpanelAfterRender",
            "designerId": "d2176402-a966-40d6-8eb1-acd21eb729e6"
        },
        {
            "type": "viewcontrollereventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "tabpanel"
                ],
                "fn": "onDocumentGridRefresh",
                "implHandler": [
                    "this.foldersRefresh();"
                ],
                "name": "documentgridrefresh",
                "scope": "me"
            },
            "name": "onDocumentGridRefresh",
            "designerId": "123f9322-ac73-4eb0-8384-dcd1b36cd3a9"
        }
    ]
}