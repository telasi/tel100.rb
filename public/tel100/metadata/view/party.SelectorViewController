{
    "type": "Ext.app.ViewController",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "partyselector",
        "designer|userClassName": "party.SelectorViewController"
    },
    "designerId": "5ab917bd-df16-4cd4-a1a4-253bd8a43e41",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "obj"
                ],
                "fn": "onAddParty",
                "implHandler": [
                    "var grid = this.getView().getComponent('selectedParties');",
                    "grid.getStore().add(obj);"
                ]
            },
            "name": "onAddParty",
            "designerId": "9255f505-8da9-45ea-9d1c-2214acef1fb2"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "obj"
                ],
                "fn": "onRemoveParty",
                "implHandler": [
                    "var grid = this.getView().getComponent('selectedParties');",
                    "var store = grid.getStore();",
                    "store.remove(obj);"
                ]
            },
            "name": "onRemoveParty",
            "designerId": "d2055c7d-b6a5-401d-9f28-0bd9832430e9"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "dataview",
                    "record",
                    "item",
                    "index",
                    "e"
                ],
                "fn": "contextMenu",
                "implHandler": [
                    "var me = this;",
                    "var favMenu = Ext.create('Ext.menu.Menu', {",
                    "    items: [{",
                    "      text: i18n.hr.favourites.add_to,",
                    "      icon: '/images/add.png',",
                    "      handler: function(item){",
                    "        var model = Ext.create('Tel100.model.party.Favourites',",
                    "                                { person_id: record.id, person_type: record.get('ext_type') });",
                    "        model.save();",
                    "        var favpanel = Ext.ComponentQuery.query('partyfavourites')[0];",
                    "        var store = favpanel.store;",
                    "        store.reload();",
                    "      }",
                    "    }]",
                    "  });",
                    "",
                    "  e.stopEvent();",
                    "  favMenu.showAt(e.getXY());"
                ]
            },
            "name": "contextMenu",
            "designerId": "23c0d66f-00c6-4a8b-a185-caefc63e5526"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record"
                ],
                "fn": "addFromFavourites",
                "implHandler": [
                    "var obj = Ext.create('Tel100.model.party.Favourites',",
                    "                    { id: record.get('person_id'),",
                    "                     name: record.get('name'),",
                    "                     person_type: record.get('person_type') });",
                    "this.onAddParty(obj);"
                ]
            },
            "name": "addFromFavourites",
            "designerId": "cef32a11-b00e-4496-9dca-3fa73aeeb931"
        }
    ]
}