/*
 * File: app/view/document/folder/Substitude.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Tel100.view.document.folder.Substitude', {
  extend: 'Ext.panel.Panel',
  alias: 'widget.documentfoldersubstitude',

  requires: [
    'Tel100.view.document.folder.SubstitudeViewModel'
  ],

  viewModel: {
    type: 'documentfoldersubstitude'
  },
  height: 250,
  width: 400,
  layout: 'accordion',
  title: 'My Panel',
  defaultListenerScope: true,

  listeners: {
    afterrender: 'onPanelAfterRender'
  },

  onPanelAfterRender: function(component, eOpts) {
    var me = this;
    var vm = this.getViewModel();
    var store = vm.getStore('substitudes');
    store.load(function(records,operation,success){
      var length = records.length;
      me.setVisible(length > 0);
      for(var i =0; i < length; i++){
        var subitem = Ext.create('Tel100.view.document.folder.SubItem');
        var newsubitem = { title: records[i].data.first_name + ' ' + records[i].data.last_name};
        subitem.getViewModel().set('subitem', newsubitem);
        me.add(subitem);
      }

    });

  }

});